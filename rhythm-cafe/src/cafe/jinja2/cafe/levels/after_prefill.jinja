{% from "cafe/base.jinja" import base with context %}
{% from 'cafe/layouts/layout_with_header.jinja' import layout_with_header as base_layout with context %}
{% from 'cafe/components/level_box.jinja' import level_box %}

{% set content %}
<script>
const INITIAL_PREFILL_DATA = {{ prefill.result | safe }};
const state = {
    level: {},
    get initialLevel() {
        return {
            song_alt: "",
            ...INITIAL_PREFILL_DATA
        }
    },
    reset() {
        this.level = this.initialLevel;
    },
    init() {
        this.reset();
    },
}
</script>
<div class="eap" x-data="state">
    <div class="eap__form">
        <form>
            <sl-input label="Song" x-model="level.song"></sl-input>
            <sl-input label="Song (alternate)" x-model="level.song_alt"></sl-input>
        </form>
    </div>
    <div class="eap__preview">
        {# {{ level_box(data) }} #}
    </div>
</div>
{% endset %}

{% call base(title="Rhythm Cafe") %}
    {% call base_layout() %} 
    {{ content }}
    {% endcall %}
{% endcall %}

<style data-hoist="true">
.eap {
    display: flex;
    flex-direction: row;
    min-height: 100vh;
}

.eap__form {
    flex-grow: 1;
}

.eap__preview {
    --other-color: var(--sl-color-primary-50);
    width: 30rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background-color: var(--sl-color-primary-100);
    background-image: linear-gradient(45deg, var(--other-color) 25%, transparent 25%, transparent 75%, var(--other-color) 75%), linear-gradient(45deg, var(--other-color) 25%, transparent 25%, transparent 75%, var(--other-color) 75%);
    background-size: 36px 36px;
    background-position: 0 0, 18px 18px;
}
</style>