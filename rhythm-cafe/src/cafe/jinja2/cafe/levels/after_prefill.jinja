{% from "cafe/base.jinja" import base with context %}
{% from 'cafe/layouts/layout_with_header.jinja' import layout_with_header as base_layout with context %}

{% set content %}
<script>
const INITIAL_PREFILL_DATA = {{ prefill.result | safe }};
const data = {
    data: {},
    get initialData() {
        return {
            song_alt: "",
            ...INITIAL_PREFILL_DATA
        }
    },
    reset() {
        this.data = this.initialData;
    },
    init() {
        this.reset();
    },
}
</script>
<div class="eap" x-data="data">
    <div class="eap__form">
        <form>
            <sl-input label="Song" x-model="data.song"></sl-input>
            <sl-input label="Song (alternate)" x-model="data.song_alt"></sl-input>
        </form>
    </div>
    <div class="eap__preview">
        <textarea x-text="JSON.stringify($data)"></textarea>
    </div>
</div>
{% endset %}

{% call base(title="Rhythm Cafe") %}
    {% call base_layout() %} 
    {{ content }}
    {% endcall %}
{% endcall %}

<style data-hoist="true">
.eap {
    background-color: red;
    display: flex;
    flex-direction: row;
}
</style>